<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html"; charset="utf-8">
        <title>Video 24</title>
        <style>
            table{
                text-align: center;
                background-color: beige;
                width: 25%;
                margin: auto;
                border: 2px gray dashed;
            }
            td{
                padding: 15px;
            }
        </style>
        
        <script>
            window.addEventListener("load", comenzar, false);

            var edad;

            function comenzar (){
                edad=document.getElementById("miedad");

                edad.addEventListener("change", cambiar_rango, false);

                document.datos_usuario.addEventListener("invalid", validar, true);

                document.getElementById("enviar").addEventListener("click", enviar, false);

                document.datos_usuario.addEventListener("input", validar_tiempo_real, false);
            }

            function cambiar_rango(){
                var salida=document.getElementById("rango");
                var calculo=edad.value-30;

                if(calculo<30){
                    calculo=0
                    edad.value=30;
                }
                salida.innerHTML=calculo+" a "+edad.value;
            }

            function validar(e){
                var elemento=e.target;
                elemento.style.background="#FFDDDD";
            }

            function enviar(){
                var carrectp=document.datos_usuario.checkValidity();
                var cuadro_usuario=documente.getElementById("usuario");

                if(correcto==true){
                    document.datos_usuario.submit();
                }else if(cuadro_usuario.validity.valueMissing==true){
                    alert("El usuario no puede estar vacío");
                }
            }

            function validar_tiempo_real(e){
                var elemento=e.target;
                if(elemento.validity.valid==true){
                    elemento.style.background="#FFFFFF";
                }else{
                    elemento.style.background="#FFDDDD";
                }
            }
            </script>
    </head>

    <body>
        <section>
            <form name="datos_usuario" method="get">
                <!-- <datalist id="informacion">
                    <option value="625115888" label="   Telefono 1"></option>
                    <option value="625154568" label="   Telefono 2"></option>
                    <option value="625116548" label="   Telefono 3"></option>
                </datalist>

                Teléfono:&nbsc<input type="tel" name="telefono" id="telefono" list="informacion"> -->

                <table>
                    <tr>
                        <td>Usuario</td>
                        <td><input pattern="[A-Za-z]{3}" name="usuario" id="usuario" maxlength="10" required></td>
                    </tr>
                    <tr>
                        <td>Email</td>
                        <td><input type="email" name="miemmail" id="miemmail" required></td>
                    </tr>
                        <td>Edad</td>
                        <td><input type="range" name="miedad" id="miedad" min="0" max="120" step="30" value="30"></td>
                    <tr>
                    <tr>
                        <td>
                            <output id="rango">0 a 30</output>
                        </td>
                    </tr>
                        <td><input type="submit" id="enviar" value="Registrar"></td>
                    </tr>

                </table>



            </form>
        </section>

    </body>

</html>